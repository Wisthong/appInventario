<!-- <app-navbar></app-navbar> -->

<h1>GESTION</h1>

<div class="card flex justify-content-center">
  <p-button
    class="text-center my-5"
    (click)="showDialog()"
    icon="pi pi-external-link"
    label="Informacion de usuarios"
  ></p-button>
  <p-dialog
    header="Usuarios registrados"
    [(visible)]="visible"
    [style]="{ width: '50vw' }"
  >
    <ng-container>
      <div class="container text-center">
        <mat-form-field>
          <mat-label>
            <mat-icon>search</mat-icon> Parametro de busqueda</mat-label
          >
          <input
            matInput
            (keyup)="applyFilter($event)"
            placeholder="Developer"
            #input
          />
        </mat-form-field>
      </div>
      <div class="table-responsive">
        <table
          mat-table
          [dataSource]="dataSource"
          matSort
          (matSortChange)="announceSortChange($event)"
          class="mat-elevation-z8"
        >
          <!-- Symbol Column IP-->
          <ng-container matColumnDef="name">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              sortActionDescription="Sort by name"
            >
              name
            </th>
            <td mat-cell *matCellDef="let element">{{ element.name }}</td>
          </ng-container>

          <!-- Name Hostname -->
          <ng-container matColumnDef="lastname">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              sortActionDescription="Sort by lastname"
            >
              lastname
            </th>
            <td mat-cell *matCellDef="let element">{{ element.lastname }}</td>
          </ng-container>

          <!-- Position Device -->
          <ng-container matColumnDef="email">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              sortActionDescription="Sort by email"
            >
              Dispositivo
            </th>
            <td mat-cell *matCellDef="let element">{{ element.email }}</td>
          </ng-container>

          <!-- Position Numero de Serie -->
          <ng-container matColumnDef="role">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              sortActionDescription="Sort by role"
            >
              Role
            </th>
            <td mat-cell *matCellDef="let element">{{ element.role }}</td>
          </ng-container>

          <ng-container matColumnDef="acciones">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              sortActionDescription="Sort by acciones"
            >
              Acciones
            </th>
            <td mat-cell *matCellDef="let element">
              <div class="container">
                <div class="row">
                  <div class="col-6">
                    <!-- Boton Update -->
                    <button
                      (click)="onUpdate(element._id)"
                      matTooltip="Modificar"
                      type="submit"
                      mat-mini-fab
                      color="accent"
                    >
                      <mat-icon> settings </mat-icon>
                    </button>
                  </div>
                  <div class="col-6">
                    <!-- Boton eliminar -->
                    <button
                      (click)="onDelete(element._id)"
                      matTooltip="Eliminar"
                      type="submit"
                      mat-mini-fab
                      color="warn"
                    >
                      <mat-icon> delete_forever </mat-icon>
                    </button>
                  </div>
                </div>
              </div>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
        <div class="responsive">
          <mat-paginator
            [pageSizeOptions]="[10, 25, 50]"
            showFirstLastButtons
            aria-label="Select page of periodic elements"
          >
          </mat-paginator>
        </div>
      </div>
    </ng-container>
  </p-dialog>
</div>
